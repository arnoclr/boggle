import { Account } from "./LoginModal";
import "./AccountsSelector.css";

export interface AccountSelectorProps {
  accounts: Account[];
  onAccountSelected: (account: Account) => void;
  onAccountDeleted: (account: Account) => void;
}

export default function AccountsSelector({
  accounts,
  onAccountSelected,
  onAccountDeleted,
}: AccountSelectorProps) {
  function emailName(email: string): string {
    return email.split("@")[0];
  }

  function emailDomain(email: string): string {
    return email.split("@")[1];
  }

  return (
    <ul className="AccountsSelector">
      {accounts.map((account) => (
        <li key={account.email + account.authMethod}>
          <button type="button" onClick={() => onAccountSelected(account)}>
            {account.authMethod === "password" ? (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="40"
                viewBox="0 -960 960 960"
                width="40"
              >
                <path d="M76.334-199.001v-67.998h806.998v67.998H76.334Zm41.897-250.41-47.204-26.461 36.615-62.898H35.155v-53.588h72.487l-36.615-62.719 47.204-26.717 35.538 62.308 35.872-62.308 46.948 26.717-36.359 62.719h72.154v53.588H200.23l36.359 62.898-46.948 26.461-35.872-63.231-35.538 63.231Zm325.897 1-47.204-27.538 36.615-63.308h-72.154v-53.845h72.154l-36.615-62.718 47.204-26.461 35.539 62.051 35.872-62.051 47.204 26.461-36.616 62.718h72.154v53.845h-72.154l36.616 63.308-47.204 27.538-35.872-63.231-35.539 63.231Zm325.897 0-46.947-27.538 36.359-63.308h-72.154v-53.845h72.154l-36.359-62.718 46.947-26.461 35.872 62.051 35.539-62.051 47.204 26.461-36.615 62.718h72.487v53.845h-72.487l36.615 63.308-47.204 27.538-35.539-63.231-35.872 63.231Z" />
              </svg>
            ) : (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="40"
                viewBox="0 -960 960 960"
                width="40"
              >
                <path d="M128.333-573.231q-4.5-2.744-5.967-8.564-1.468-5.82 2.48-11.846 62.128-86.231 155.636-135.128 93.507-48.898 199.749-48.898 106.876 0 201.54 47.539 94.665 47.538 156.87 134.487 4.41 6.615 2.884 12.679-1.525 6.064-6.987 9.475-5.205 3.153-11.162 2.901-5.956-.252-10.478-7.414-56.667-80.667-144.639-124.68-87.973-44.013-188.028-44.013-97.641 0-184.629 44.603Q208.615-657.487 151.666-578q-5.128 7-11.294 7.782-6.167.782-12.039-3.013Zm469.59 501.308q-107.461-25-169.91-105.737t-62.449-193.52q0-47.743 33.577-80.692 33.577-32.948 81.886-32.948 48.385 0 82.179 32.948Q597-418.923 597-371.18q0 35.208 24.716 59.938 24.716 24.729 60.244 24.729 35.374 0 59.745-24.833 24.372-24.833 24.372-59.834 0-116.361-83.77-196.719-83.771-80.358-202.129-80.358-118.024 0-201.448 80.344-83.423 80.343-83.423 196.862 0 35.859 5.616 74.801 5.615 38.942 17.307 74.276 2.539 7.282.693 12.756t-7.769 7.397q-8 3.667-14.385.308-6.384-3.359-8.589-10.051-12.975-40.411-18.206-79.603-5.231-39.192-5.231-80.013 0-128.618 92.682-219.475 92.681-90.858 222.823-90.858 131.957 0 224.714 90.242 92.756 90.242 92.756 220.091 0 48.025-33.546 82.025-33.547 34.001-82.095 34.001-48.769 0-82.615-34.001-33.846-34-33.846-82.025 0-35.077-24.965-58.871-24.966-23.795-59.651-23.795-34.667 0-59.565 23.691-24.897 23.691-24.897 58.975 0 102.536 56.577 173.076 56.577 70.54 152.398 95.617 7.902 2.229 10.887 7.529 2.984 5.3 2.318 10.773-2.257 6.672-7.462 10.633-5.205 3.962-13.333 1.629ZM249.615-785.257q-4.923 2.769-10.653 1.359-5.731-1.41-8.885-8.025-2.487-4.872-1.679-11.141.807-6.269 6.089-9.013 56.359-32.461 118.769-48.102Q415.667-875.82 481-875.82q65.237 0 127.331 16.243 62.094 16.244 119.643 46.833 6.462 3.795 7.654 9.564 1.192 5.77-1.68 10.436-3.538 5.077-9.474 7.321-5.936 2.243-13.038-1.5-53.026-29.411-111.785-43.462-58.759-14.051-118.838-14.051-60.813 0-118.685 15.513-57.872 15.512-112.513 43.666Zm128.359 697.59q-60.102-61.41-86.205-133.013-26.102-71.602-26.102-150.512 0-88.141 62.736-149.757 62.736-61.615 152.615-61.615 90.213 0 153.379 61.615 63.167 61.616 63.167 149.769 0 6.731-4.378 11.109t-11.109 4.378q-6.769 0-11.333-4.378t-4.564-11.109q0-75.743-54.376-128.077-54.376-52.333-130.795-52.333-76.086 0-130.022 52.333-53.936 52.334-53.936 128.048 0 74.03 23.628 137.914 23.629 63.885 81.193 123.401 5.256 5.997 4.974 11.6-.282 5.602-3.641 10.627-3.333 5.667-11.846 5.474-8.513-.192-13.385-5.474ZM685.667-159q-93.769 0-156.987-58.21-63.218-58.209-63.218-153.97 0-7.256 3.856-11.576 3.856-4.321 11.218-4.321 6.695 0 11.297 4.321 4.603 4.32 4.603 11.576 0 83.822 54.551 132.514 54.551 48.692 134.68 48.692 14.41 0 24.705-1.667 10.295-1.666 22.32-2.333 7.641.384 10.923 4.372 3.282 3.987 3.282 9.194.257 6.148-3.166 9.945-3.424 3.796-9.5 5.463-9.539 2.769-22.321 4.384Q699.128-159 685.667-159Z" />
              </svg>
            )}
            <span className="email">
              <span className="name">{emailName(account.email)}</span>
              <span className="domain">@{emailDomain(account.email)}</span>
            </span>
          </button>
          <button
            onClick={() => onAccountDeleted(account)}
            type="button"
            title="Retirer de la liste de connexion rapide (ne supprime pas le compte)"
          >
            x
          </button>
        </li>
      ))}
    </ul>
  );
}
